{"version":3,"sources":["../../dist-esnext/core/schema.js"],"names":["Schema","userApp","productApp","authedUser","log","userSchema","prodsSchema","viewer","viewerType","name","fields","id","userConnection","getUserConnection","prods","getProds","outputViewer","type","resolve","schema","query","mutation","saveUser","getSaveUserMutation","getAuthToken","getAuthTokenMutation","saveProd","getSaveProdMutation"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;;;AACA,SAASA,MAAT,CAAgBC,OAAhB,EAAyBC,UAAzB,EAAqCC,UAArC,EAAiDC,GAAjD,EAAsD;AAClD,UAAMC,aAAa,0BAAW,EAAEJ,OAAF,EAAWE,UAAX,EAAuBC,GAAvB,EAAX,CAAnB;AACA,UAAME,cAAc,2BAAY,EAAEJ,UAAF,EAAcC,UAAd,EAA0BC,GAA1B,EAAZ,CAApB;AACA,UAAMG,SAAS,EAAf;AACA,UAAMC,aAAa,+BAAsB;AACrCC,cAAM,QAD+B;AAErCC,gBAAQ,OAAO;AACXC,gBAAI,iCAAc,QAAd,CADO;AAEXC,4BAAgBP,WAAWQ,iBAAX,EAFL;AAGXC,mBAAOR,YAAYS,QAAZ;AAHI,SAAP;AAF6B,KAAtB,CAAnB;AAQA,UAAMC,eAAe;AACjBC,cAAMT,UADW;AAEjBU,iBAAS,MAAMX;AAFE,KAArB;AAIA,UAAMY,SAAS,2BAAkB;AAC7BC,eAAO,+BAAsB;AACzBX,kBAAM,OADmB;AAEzBC,oBAAQ,OAAO;AACXH,wBAAQ;AACJU,0BAAMT,UADF;AAEJU,6BAAS,MAAMX;AAFX;AADG,aAAP;AAFiB,SAAtB,CADsB;AAU7Bc,kBAAU,+BAAsB;AAC5BZ,kBAAM,UADsB;AAE5BC,oBAAQ,OAAO;AACXY,0BAAUjB,WAAWkB,mBAAX,CAA+BP,YAA/B,CADC;AAEXQ,8BAAcnB,WAAWoB,oBAAX,CAAgCT,YAAhC,CAFH;AAGXU,0BAAUpB,YAAYqB,mBAAZ;AAHC,aAAP;AAFoB,SAAtB;AAVmB,KAAlB,CAAf;AAmBA,WAAOR,MAAP;AACH;kBACcnB,M;AACf","file":"schema.js","sourcesContent":["import { GraphQLObjectType, GraphQLSchema } from 'graphql';\r\nimport { globalIdField } from 'graphql-relay';\r\nimport ProdsSchema from '../prods/prodsSchema';\r\nimport UserSchema from '../users/userSchema';\r\nfunction Schema(userApp, productApp, authedUser, log) {\r\n    const userSchema = UserSchema({ userApp, authedUser, log });\r\n    const prodsSchema = ProdsSchema({ productApp, authedUser, log });\r\n    const viewer = {};\r\n    const viewerType = new GraphQLObjectType({\r\n        name: 'Viewer',\r\n        fields: () => ({\r\n            id: globalIdField('Viewer'),\r\n            userConnection: userSchema.getUserConnection(),\r\n            prods: prodsSchema.getProds()\r\n        })\r\n    });\r\n    const outputViewer = {\r\n        type: viewerType,\r\n        resolve: () => viewer\r\n    };\r\n    const schema = new GraphQLSchema({\r\n        query: new GraphQLObjectType({\r\n            name: 'Query',\r\n            fields: () => ({\r\n                viewer: {\r\n                    type: viewerType,\r\n                    resolve: () => viewer\r\n                }\r\n            })\r\n        }),\r\n        mutation: new GraphQLObjectType({\r\n            name: 'Mutation',\r\n            fields: () => ({\r\n                saveUser: userSchema.getSaveUserMutation(outputViewer),\r\n                getAuthToken: userSchema.getAuthTokenMutation(outputViewer),\r\n                saveProd: prodsSchema.getSaveProdMutation(),\r\n            })\r\n        })\r\n    });\r\n    return schema;\r\n}\r\nexport default Schema;\r\n//# sourceMappingURL=schema.js.map"]}